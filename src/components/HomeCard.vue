<script setup>
import axios from "axios";
import { ref, onMounted } from "vue";

const data = ref({
  totalRevenue: 0,
  numberOfOrders: 0,
  averageOrderValue: 0,
  newOrders: 0,
  newCustomers: 0,
});

defineProps({
  title: String,
  value: [String, Number],
  unit: {
    type: String,
    default: "",
  },
});

async function fetchDashboardData() {
  try {
    const response = await axios.get("http://localhost:3000/dashboard/summary");
    data.value = response.data;
    console.log(data.value);
  } catch (error) {
    console.error("Error fetching dashboard data:", error);
  }
}

onMounted(() => {
  fetchDashboardData();
});
</script>
<template>
  <div class="card bg-base-100 card-sm border-main h-33 w-82 border shadow-sm">
    <div class="card-body">
      <div class="flex flex-col gap-1">
        <div class="flex justify-between">
          <h2 class="card-title text-main">{{ title }}</h2>
          <svg
            width="30"
            height="31"
            viewBox="0 0 30 31"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect y="0.5" width="30" height="30" rx="12" fill="#FFF4CB" />
            <path
              d="M21.309 16.25C21.9022 15.3996 22.25 14.3654 22.25 13.25C22.25 10.3505 19.8995 8 17 8C14.1005 8 11.75 10.3505 11.75 13.25C11.75 14.0552 11.9313 14.818 12.2552 15.5"
              stroke="#FE9423"
              stroke-width="1.125"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M15.8281 15.25V11.25M17 11.25V10.25M17 16.25V15.25M15.8281 13.25H18.1719M18.1719 13.25C18.5602 13.25 18.875 13.5858 18.875 14V14.5C18.875 14.9143 18.5602 15.25 18.1719 15.25H15.125M18.1719 13.25C18.5602 13.25 18.875 12.9142 18.875 12.5V12C18.875 11.5858 18.5602 11.25 18.1719 11.25H15.125"
              stroke="#FE9423"
              stroke-width="1.125"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M8.75 17H10.5461C10.7667 17 10.9843 17.0497 11.1816 17.1452L12.7131 17.8862C12.9104 17.9817 13.128 18.0313 13.3486 18.0313H14.1306C14.8869 18.0313 15.5 18.6247 15.5 19.3565C15.5 19.386 15.4797 19.4121 15.4503 19.4202L13.5447 19.9471C13.2028 20.0416 12.8367 20.0087 12.5187 19.8548L10.8816 19.0627M15.5 18.875L18.9446 17.8167C19.5553 17.6264 20.2153 17.852 20.5978 18.3817C20.8744 18.7647 20.7618 19.3131 20.3589 19.5456L14.7222 22.7979C14.3637 23.0047 13.9407 23.0552 13.5464 22.9382L8.75 21.5149"
              stroke="#FE9423"
              stroke-width="1.125"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </div>

        <p class="text-gray-400">Last 30 days</p>
      </div>

      <div class="flex items-center justify-between gap-1">
        <p class="text-[1.3rem] font-bold">
          ${{ data.totalRevenue?.toLocaleString() }}
        </p>
        <div class="flex items-center justify-center">
          <svg
            width="25"
            height="13"
            viewBox="0 0 25 13"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M21 2L16.7752 7.00511C16.014 7.90695 15.6333 8.35788 15.1849 8.3215C14.7367 8.28513 14.4019 7.77616 13.7324 6.75823L13.1941 5.94002C12.6108 5.05315 12.3192 4.60971 11.92 4.53794C11.5207 4.46617 11.1479 4.79014 10.402 5.43807L4 11M21 2H17.2812M21 2V6.15385"
              stroke="#1CB808"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>

          <p class="text-sm font-bold text-[#1CB808]">19%</p>
        </div>
      </div>
    </div>
  </div>
</template>
